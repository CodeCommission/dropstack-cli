#!/usr/bin/env node
const program = require('commander');
const updateNotifier = require('update-notifier');
const nodeVersion = require('node-version');
const pkg = require('../package.json');

updateNotifier({pkg}).notify();

if (nodeVersion.major < 6) {
  console.error(chalk.red(`Error! Linklet requires at least version 6 of NodeJS. Please upgrade your NodeJS version please.`));
  process.exit(1);
}

process.on('SIGINT', () => {
  process.stderr.write('\x1B[?25h'); //show terminal cursor
  process.exit(0);
});

program
  .version(`${pkg.name} v${pkg.version}`)
  .command('login <url>', 'Log-in to URL given deployment environment. (default https://api.cloud.dropstack.run)')
  .command('logout', 'Log-out from current deployment environment.')
  .command('account', 'Show account informations.')
  .command('deploy [folder]', 'Deploy to current deployment environment.').alias('add')
  .command('list', 'List your active deployment from current environment.').alias('ls')
  .command('remove [name]', 'Remove deployment from current environment.').alias('rm')
  .command('ssl [name]', 'Manage SSL for deployments.')
  .command('alias [name]', 'Manage domain for deployments.')
  .command('logs [name]', 'Show StdOut/StdErr logs for deployment.').alias('log')
  .command('metric [name]', 'Show metrics for deployments.')
  .command('scale [name]', 'Scale instances for deployments.')
  .parse(process.argv);
